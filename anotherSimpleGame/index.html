<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper</title>
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <div class="bg-gray-500 w-full h-screen flex justify-center items-center">
        <div id="mainBoard" class=" grid grid-cols-10 gap-2"></div>
    </div>
    <script>
        // creating mainboard - buttons
        const mainBoard = document.getElementById('mainBoard');
        let text = "";
        for (let i = 0; i < 10; i++) {
            for (let j = 0; j < 10; j++) {
                text +=
                    `<button id='${i*10 + j + 1}' class="w-12 h-12 border-white text-white border-2 rounded-2xl hover:bg-sky-300 cursor-pointer" onclick="action(${i*10 + j + 1})">${i*10 + j + 1}</button>`;
            }
        }
        mainBoard.innerHTML = text;

        let begins = false;
        // creating Mines
        let mines = []
        function createMines(x) {
            begins = true;
            while (mines.length < 10) {
                let a = Math.floor(Math.random() * 100) + 1;
                while (mines.includes(x) || mines.includes(a)) {
                    a = Math.floor(Math.random() * 100) + 1;
                };
                mines.push(a);
            };
            console.log(mines);
        }
        // createMines()

        function check(x) {
            return mines.includes(x);
        };

        // counting mines
        function count(x) {
            let minesCounts = 0;
            if (x == 1) {
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 11)) {
                    minesCounts += 1;
                }
            } else if (x == 10) {
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                }
            } else if (x == 91) {
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                }
            } else if (x == 100) {
                if (mines.includes(x - 11)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                }
            } else if (x % 10 == 1) {
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 11)) {
                    minesCounts += 1;
                }
            } else if (x % 10 == 0) {
                if (mines.includes(x - 11)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                }
            } else if (x > 10 && x < 91 && x % 10 != 0 && x % 10 != 1) {
                if (mines.includes(x - 11)) {
                    minesCounts += 1;
                };
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                };
                if (mines.includes(x - 9)) {
                    minesCounts += 1;
                };
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                };
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                };
                if (mines.includes(x + 9)) {
                    minesCounts += 1;
                };
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                };
                if (mines.includes(x + 11)) {
                    minesCounts += 1;
                };
            } else if (x > 1 && x < 10) {
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 11)) {
                    minesCounts += 1;
                }
            } else if (x > 91 && x < 100) {
                if (mines.includes(x - 11)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 10)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 9)) {
                    minesCounts += 1;
                }
                if (mines.includes(x - 1)) {
                    minesCounts += 1;
                }
                if (mines.includes(x + 1)) {
                    minesCounts += 1;
                }
            }
            return minesCounts;
        }

        function action(x) {
            if (!begins) {
                createMines(x);
            } 
            if (mines.includes(x)) {
                alert('lost');
            } else {
                // cleaning and clearing
                let a = +count(x);
                if (a == 0) {
                    document.getElementById(`${x}`).innerHTML = '';
                } else {
                    document.getElementById(`${x}`).innerHTML = `${a}`;
                    document.getElementById(`${x}`).style.backgroundColor = 'yellow';
                    document.getElementById(`${x}`).style.color = 'black';
                }
            }
        };
    </script>
</body>

</html>